{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{424:function(s,a,t){\"use strict\";t.r(a);var e=t(42),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[t(\"h1\",{attrs:{id:\"docker-教程\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker-教程\"}},[s._v(\"#\")]),s._v(\" docker 教程\")]),s._v(\" \"),t(\"p\",[s._v(\"是一个容器化技术， 相当于一个虚拟机，比虚拟机清凉高效，可以秒启动。\")]),s._v(\" \"),t(\"p\",[s._v(\"可以理解为简易的系统。\")]),s._v(\" \"),t(\"p\",[t(\"img\",{attrs:{src:\"docker.png\",alt:\"docker教程\"}})]),s._v(\" \"),t(\"p\",[s._v(\"官方文档：https://docs.docker.com/\")]),s._v(\" \"),t(\"p\",[s._v(\"镜像下载网站：https://hub.docker.com/\")]),s._v(\" \"),t(\"p\",[t(\"strong\",[s._v(\"docker 能做什么？\")])]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"对文件、资源、网络隔离\")]),s._v(\" \"),t(\"li\",[s._v(\"变更管理、日志记录\")]),s._v(\" \"),t(\"li\",[s._v(\"写时复制\")])]),s._v(\" \"),t(\"h2\",{attrs:{id:\"_1、基本组成\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_1、基本组成\"}},[s._v(\"#\")]),s._v(\" 1、基本组成\")]),s._v(\" \"),t(\"p\",[t(\"strong\",[s._v(\"（1）、image（镜像）\")])]),s._v(\" \"),t(\"p\",[s._v(\"mysql 安装包相当于一个镜像，还可以安装一个 Linux 系统。\")]),s._v(\" \"),t(\"p\",[t(\"strong\",[s._v(\"（2）、container（容器）\")])]),s._v(\" \"),t(\"p\",[s._v(\"通过镜像运行的服务，一个镜像可以运行\"),t(\"strong\",[s._v(\"多个服务\")]),s._v(\"。\")]),s._v(\" \"),t(\"p\",[t(\"strong\",[s._v(\"（3）、repository（仓库）\")])]),s._v(\" \"),t(\"p\",[s._v(\"存放镜像文件，分为私有和共有，docker hub 等。\")]),s._v(\" \"),t(\"h2\",{attrs:{id:\"_2、linux-安装-docker\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_2、linux-安装-docker\"}},[s._v(\"#\")]),s._v(\" 2、linux 安装 docker\")]),s._v(\" \"),t(\"p\",[s._v(\"环境：CentOS 7 Linux\")]),s._v(\" \"),t(\"p\",[s._v(\"一键安装，这是官方提供的脚本，第一行命令是，当前文件夹下载脚本，第二行是运行。\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 这样下载也可以（推荐，一键安装）\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"curl\")]),s._v(\" -fsSL https://get.docker.com -o get-docker.sh\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sh\")]),s._v(\" get-docker.sh  \\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 启动\")]),s._v(\"\\nsystemctl start docker\\n\")])])]),t(\"p\",[s._v(\"可以跳过下面的（1 - 6）。\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 1、查看运行状态\")]),s._v(\"\\nsystemctl status docker\\n\")])])]),t(\"p\",[s._v(\"如果之前安装过docker，先需要卸载旧的版本。\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 2、卸载旧版本\")]),s._v(\"\\nyum remove docker \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n            docker-client \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n            docker-client-latest \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n            docker-common \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n            docker-latest \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n            docker-latest-logrotate \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n            docker-logrotate \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n            docker-engine\\n\")])])]),t(\"p\",[s._v(\"安装 \"),t(\"code\",[s._v(\"yum-utils\")]),s._v(\" 包，设置下载镜像源\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 3、安装 yum 工具包\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sudo\")]),s._v(\" yum \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" -y yum-utils\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 4、设置阿里云镜像源\")]),s._v(\"\\nyum-config-manager \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n    --add-repo \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"\\n\\thttp://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\\n\\t\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 5、安装 docker\")]),s._v(\"\\nyum \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"install\")]),s._v(\" docker-ce docker-ce-cli containerd.io\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 6、启动 docker \")]),s._v(\"\\nsystemctl start docker\\n\")])])]),t(\"p\",[s._v(\"启动之后，我们通过以下命令来查看运行状态，如果返回下面的内容说明安装成功：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看运行状态\")]),s._v(\"\\nsystemctl status docker\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 启动成功会显示以下的内容\")]),s._v(\"\\n● docker.service - Docker Application Container Engine\\n   Loaded: loaded \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"/usr/lib/systemd/system/docker.service\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\" disabled\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\" vendor preset: disabled\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n   Active: active \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"running\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\" since Tue \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2021\")]),s._v(\"-02-16 \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"11\")]),s._v(\":43:42 CST\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\" 17min ago\\n     Docs: https://docs.docker.com\\n Main PID: \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"17592\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"(\")]),s._v(\"dockerd\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\")\")]),s._v(\"\\n    Tasks: \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"8\")]),s._v(\"\\n   Memory: \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"40\")]),s._v(\".9M\\n   CGroup: /system.slice/docker.service\\n           └─17592 /usr/bin/dockerd -H fd:// --containerd\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),s._v(\"/run/containerd/containerd.sock\\n\")])])]),t(\"p\",[s._v(\"配置镜像加速，打开下面的文件，如果没有创建文件：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 打开文件\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vi\")]),s._v(\" /etc/docker/daemon.json\\n\")])])]),t(\"p\",[s._v(\"填写一些内容\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"registry-mirrors\"')]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"https://registry.docker-cn.com\"')]),s._v(\",\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"https://docker.mirrors.ustc.edu.cn\"')]),s._v(\",\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"http://hub-mirror.c.163.com\"')]),s._v(\",\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"https://cr.console.aliyun.com/\"')]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 重启docker服务使配置生效\")]),s._v(\"\\nsystemctl restart docker.service\\n\")])])]),t(\"h2\",{attrs:{id:\"_3、镜像命令\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_3、镜像命令\"}},[s._v(\"#\")]),s._v(\" 3、镜像命令\")]),s._v(\" \"),t(\"p\",[s._v(\"官方给了一个 \"),t(\"code\",[s._v(\"hello-wrld\")]),s._v(\" 镜像，通过下面的名来安装 \"),t(\"code\",[s._v(\"hello-world\")]),s._v(\" 镜像：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"docker run hello-world\\n\")])])]),t(\"p\",[s._v(\"运行此命令后，系统从本地查找 \"),t(\"code\",[s._v(\"hello-world\")]),s._v(\"  镜像文件，我们这里之前没有，所以从远程仓库去下载\"),t(\"code\",[s._v(\"hello-world\")]),s._v(\" 镜像，并执行这个镜像文件。\")]),s._v(\" \"),t(\"p\",[t(\"code\",[s._v(\"hello-world\")]),s._v(\" 竟像在命令窗口显示 'Hello from Docker!' 字样。\")]),s._v(\" \"),t(\"p\",[s._v(\"那么我们怎么查看我们安装的镜像呢？\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看本地安装的镜像文件\")]),s._v(\"\\ndocker images\\n\")])])]),t(\"p\",[s._v(\"以下的我们安装完 \"),t(\"code\",[s._v(\"hello-world\")]),s._v(\" 后，查询镜像的结果，会显示包名，ID，大小等信息。\")]),s._v(\" \"),t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[s._v(\"REPOSITORY    TAG       IMAGE ID       CREATED         SIZE\\nhello-world   latest    bf756fb1ae65   13 months ago   13.3kB\\n\")])])]),t(\"p\",[s._v(\"我们也可以先下载镜像，之后在使用：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 下载 mysql 镜像\")]),s._v(\"\\ndocker pull mysql\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 指定版本下载\")]),s._v(\"\\ndocker pull mysql:5.7\\n\")])])]),t(\"p\",[s._v(\"删除镜像需要 id，id 通过 \"),t(\"code\",[s._v(\"docker images\")]),s._v(\" 命令来查看 。\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 要删除镜像的 id\")]),s._v(\"\\ndocker rmi -f \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"id\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 删除所有的镜像\")]),s._v(\"\\ndocker rmi -f \"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$(\")]),s._v(\"docker images -aq\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\")\")])]),s._v(\"\\n\")])])]),t(\"h2\",{attrs:{id:\"_4、容器命令\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_4、容器命令\"}},[s._v(\"#\")]),s._v(\" 4、容器命令\")]),s._v(\" \"),t(\"p\",[t(\"strong\",[s._v(\"（1）启动，停止，运行命令：\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# docker run [可选参数] [镜像名]\")]),s._v(\"\\ndocker run -d mysql\\n\")])])]),t(\"p\",[s._v(\"参数说明：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"--name\"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"Name\"')]),s._v(\"         \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 容器名字，比如sql1，sql2\")]),s._v(\"\\n-d                    \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 后台方式运行\")]),s._v(\"\\n-it                   \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 交互方式运行，比如运行一个 linux 系统，使用此命令进入\")]),s._v(\"\\n-p ip:主机端口:容器端口  \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 设置端口\")]),s._v(\"\\n\")])])]),t(\"p\",[s._v(\"启动是创建一个容器并且运行，运行是运行已经创建了的容器\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 停止\")]),s._v(\"\\ndocker stop \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"容器id\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 运行 \")]),s._v(\"\\ndocker start \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"容器id\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 重启\")]),s._v(\"\\ndocker restart \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"容器id\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \\n\")])])]),t(\"p\",[t(\"strong\",[s._v(\"（2）查看当前运行的容器：\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"docker \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ps\")]),s._v(\"\\n\")])])]),t(\"p\",[t(\"strong\",[s._v(\"（3）删除容器\")])]),s._v(\" \"),t(\"p\",[s._v(\"容器和镜像的概念一定要分清楚，一个容器就是运行的一个服务，一个镜像可以运行多个容器。比如安装一个 mysql 镜像，可以启动两个 mysql 容器，两个单独运行。\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 删除一个容器\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 不带 -f 参数，不能删除正在运行的容器\")]),s._v(\"\\ndocker \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"rm\")]),s._v(\" -f \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"容器id\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 删除所有容器\")]),s._v(\"\\ndocker rmi -f \"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$(\")]),s._v(\"docker images -aq\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\")\")])]),s._v(\"\\n\")])])]),t(\"h2\",{attrs:{id:\"_5、数据卷\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_5、数据卷\"}},[s._v(\"#\")]),s._v(\" 5、数据卷\")]),s._v(\" \"),t(\"p\",[t(\"strong\",[s._v(\"（1）什么是数据卷？\")])]),s._v(\" \"),t(\"p\",[s._v(\"当我们在 docker 中安装数据库之后，删除了容器数据也就没了，这不是卫门想要的。\")]),s._v(\" \"),t(\"p\",[s._v(\"数据卷就是解决这个问题的，数据卷是将 docker 容器中的数据映射到我们真实的环境当中。\")]),s._v(\" \"),t(\"p\",[s._v(\"比如我们删除了一个 mysql 容器之后 ，数据中的数据不会一起丢失。\")]),s._v(\" \"),t(\"p\",[s._v(\"这样还可以多个容器可以\"),t(\"strong\",[s._v(\"共享数据\")]),s._v(\"。\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 使用\")]),s._v(\"\\ndocker run -d -v \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"主机目录\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\":\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"容器目录\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" -p \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"10050\")]),s._v(\":8088 mysql\\n\")])])]),t(\"p\",[s._v(\"通过 \"),t(\"code\",[s._v(\"-v\")]),s._v(\" 参数来设置数据共享，\"),t(\"strong\",[s._v(\"容器目录里创建的文件会同步到主机目录中\")]),s._v(\"。\")]),s._v(\" \"),t(\"p\",[s._v(\"这个很有用，比如我们需要配置 \"),t(\"code\",[s._v(\"nignx\")]),s._v(\"  的文件的话。就映射到主机中，直接添加配置就可以了，容器内自动同步。\")]),s._v(\" \"),t(\"p\",[t(\"strong\",[s._v(\"（2）匿名挂载，具名挂载\")])]),s._v(\" \"),t(\"p\",[s._v(\"通过\"),t(\"code\",[s._v(\"-v [主机目录]:[容器目录]\")]),s._v(\" 格式挂载的文件叫匿名挂载\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看卷的对应文件:\")]),s._v(\"\\ndocker volume \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ls\")]),s._v(\"\\n\")])])]),t(\"p\",[s._v(\"会显示对应是 hash\")]),s._v(\" \"),t(\"div\",{staticClass:\"language- extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[t(\"code\",[s._v(\"DRIVER    VOLUME NAME\\nlocal     sdfakldsjflajsdlkfjlajsdflkk\\n\")])])]),t(\"p\",[s._v(\"具名挂载的格式如下：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"docker run \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"名字\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\":\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"容器目录\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 挂载 mysql\")]),s._v(\"\\ndocker run -d -v blogSqlData:/etc/nginx\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看具名挂载的文件\")]),s._v(\"\\ndocker volume \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ls\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 会显示对应是自己设置的名字\")]),s._v(\"\\nDRIVER    VOLUME NAME\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"local\")]),s._v(\"     blogSqlData\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 通过名字可以找到存放位置\")]),s._v(\"\\ndocker volume inspect blogSqlData\\n\")])])]),t(\"h2\",{attrs:{id:\"_6、docker-compose\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_6、docker-compose\"}},[s._v(\"#\")]),s._v(\" 6、docker-compose\")]),s._v(\" \"),t(\"p\",[s._v(\"实现 docker 集群的快速编排。\")]),s._v(\" \"),t(\"p\",[s._v(\"可以管理多个容器的配置，运行循序等。\")]),s._v(\" \"),t(\"p\",[t(\"strong\",[s._v(\"（1）安装\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 安装 docker compose\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"curl\")]),s._v(\" -L \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"https://github.com/docker/compose/releases/download/1.28.2/docker-compose-'),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$(\")]),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"uname\")]),s._v(\" -s\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\")\")])]),s._v(\"-\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$(\")]),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"uname\")]),s._v(\" -m\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\")\")])]),s._v('\"')]),s._v(\" -o /usr/local/bin/docker-compose\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 打开权限\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"chmod\")]),s._v(\" +x /usr/local/bin/docker-compose\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看版本\")]),s._v(\"\\ndocker-compose -v\\n\")])])]),t(\"p\",[t(\"code\",[s._v(\"curl\")]),s._v(\" 参数说明:\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[t(\"code\",[s._v(\"-L\")]),s._v(\" : 下载地址(url)\")]),s._v(\" \"),t(\"li\",[t(\"code\",[s._v(\"-o\")]),s._v(\": 把输出写到该文件中，必须输入保存文件名\")])]),s._v(\" \"),t(\"p\",[t(\"strong\",[s._v(\"（2）配置文件\")])]),s._v(\" \"),t(\"p\",[s._v(\"通过 docker-compose 控制多个服务，首先需要配置 一个 \"),t(\"code\",[s._v(\"yml\")]),s._v(\" 文件。\")]),s._v(\" \"),t(\"p\",[s._v(\"进入 \"),t(\"code\",[s._v(\"/home\")]),s._v(\" 目录\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vi\")]),s._v(\" docker-compose.yml\\n\")])])]),t(\"p\",[t(\"code\",[s._v(\"docker-compose.yml\")]),s._v(\"文件放在那个目录都可以，最好把一个项目中所有的配置都放到一个文件中。\")]),s._v(\" \"),t(\"p\",[s._v(\"添加一些配置：\\n这是添加一个启动 \"),t(\"code\",[s._v(\"mongo\")]),s._v(\" 的命令\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-yml extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-yml\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"version\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'3'\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"services\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"\\n  \"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"mongo1\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"               \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 容器的名字\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"image\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" mongo\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4\")]),s._v(\"      \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 使用的镜像\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"ports\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"              \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 映射端口\")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"-\")]),s._v(\"10050\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"27017\")]),s._v(\"\\n    \"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"environment\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\"        \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 设置用户名密码    \")]),s._v(\"\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"MONGO_INITDB_ROOT_USERNAME\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" admin\\n      \"),t(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[s._v(\"MONGO_INITDB_ROOT_PASSWORD\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\":\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"981102\")]),s._v(\"\\n\")])])]),t(\"p\",[t(\"strong\",[s._v(\"（3）启动\")])]),s._v(\" \"),t(\"p\",[s._v(\"**先切换到 存放\"),t(\"code\",[s._v(\"docker-compose.yml\")]),s._v(\" 文件的目录，**然后使用此命令，启动\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 启动\")]),s._v(\"\\ndocker-compose up -d\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 停止\")]),s._v(\"\\ndocker-compose up -d\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 删除\")]),s._v(\"\\ndocker-compose \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"rm\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看运行的容器\")]),s._v(\"\\ndocker-compose \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ps\")]),s._v(\"\\n\")])])]),t(\"h2\",{attrs:{id:\"_7、进入容器-拷贝文件\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_7、进入容器-拷贝文件\"}},[s._v(\"#\")]),s._v(\" 7、进入容器，拷贝文件\")]),s._v(\" \"),t(\"p\",[t(\"strong\",[s._v(\"（1）进入容器\")])]),s._v(\" \"),t(\"p\",[s._v(\"进入 docker 容器就是，比如我们安装一个 MongoDB 数据库容器，用命令行进入容器内，进行\"),t(\"strong\",[s._v(\"查看数据，查看文件存放那根目录，修改配置\")]),s._v(\"等操作。\")]),s._v(\" \"),t(\"p\",[s._v(\"先使用 \"),t(\"code\",[s._v(\"docker ps\")]),s._v(\"  查看要进入的容器的id 。\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 进入容器(打开新窗口)\")]),s._v(\"\\ndocker \"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"exec\")]),s._v(\" -it \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"容器id\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"bash\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 打开正在后台运行的端口 \")]),s._v(\"\\ndocker attach \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"容器id\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 退出容器\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"exit\")]),s._v(\"\\n\")])])]),t(\"p\",[s._v(\"参数说明：\")]),s._v(\" \"),t(\"ul\",[t(\"li\",[t(\"code\",[s._v(\"-it\")]),s._v(\" ：使用交互模式\")]),s._v(\" \"),t(\"li\",[t(\"code\",[s._v(\"bash\")]),s._v(\"：使用终端打开\")])]),s._v(\" \"),t(\"p\",[t(\"strong\",[s._v(\"（2）拷贝文件\")])]),s._v(\" \"),t(\"p\",[s._v(\"拷贝文件是，将 docker \"),t(\"strong\",[s._v(\"容器中的文件拷贝到主机上\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 在容器外部操作\")]),s._v(\"\\ndocker \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"cp\")]),s._v(\" 容器id:容器内路径 目的主机路径\\n\")])])]),t(\"h2\",{attrs:{id:\"_8、docker-仓库\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_8、docker-仓库\"}},[s._v(\"#\")]),s._v(\" 8、docker 仓库\")]),s._v(\" \"),t(\"p\",[s._v(\"先到 docker hub 注册账号之后，安装docker 的服务器上登录：\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 登录\")]),s._v(\"\\ndocker login\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 提交本地本地文件\")]),s._v(\"\\ndocker commit \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"comtainer id\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" lw96/msql:1.0\\n\")])])]),t(\"h2\",{attrs:{id:\"_9、卸载-docker-容器\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_9、卸载-docker-容器\"}},[s._v(\"#\")]),s._v(\" 9、卸载 docker 容器\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash extra-class\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 卸载安装包\")]),s._v(\"\\nyum remove docker-ce docker-ce-cli containerd.io\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 删除资源\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"rm\")]),s._v(\" -rf /var/lib/docker\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 资源放置目录 /var/lib/docker\")]),s._v(\"\\n\")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);","extractedComments":[]}
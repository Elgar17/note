# MySQL

![mysql](mysql.jpg)

## 1. æ•°æ®åº“ä»‹ç»

æ•°æ®åº“æ˜¯ä»€ä¹ˆï¼Ÿ

æ•°æ®åº“æ˜¯å­˜æ”¾æ•°æ®çš„ä¸€ä¸ªè½¯ä»¶ã€‚

åˆšå­¦ä¹ æ•°æ®åº“æ—¶å¾ˆå¥½å¥‡ï¼Œæ•°æ®æ˜æ˜å¯ä»¥å­˜å‚¨åœ¨æ–‡ä»¶ä¸­ï¼Œä¸ºä»€ä¹ˆè¦æ•°æ®åº“ï¼Ÿ

å¯èƒ½æ¯ä¸ªåˆå­¦è€…éƒ½æœ‰è¿™ä¸ªç–‘æƒ‘ï¼Œè¿™é‡Œè¯´æ˜ä¸€ä¸‹ã€‚

æ•°æ®å­˜æ”¾æ•°æ®åº“ä¸­æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š

ï¼ˆ1ï¼‰æœ‰åˆ©äºæ£€ç´¢ï¼ˆæœç´¢ï¼‰å’Œå…³è”æ•°æ®

```text
åå­—  å¹´é¾„ ç­çº§
Tom   18   6
Jerry  14  5
```

å½“æˆ‘ä»¬æœ‰ä¸‹é¢è¿™æ ·ä¸€ä»½æ•°æ®ï¼Œé€šè¿‡åå­—æ¥æŸ¥è¯¢ç”¨æˆ·çš„å…¶ä»–ä¿¡æ¯ï¼Œå¦‚æœå­˜æ”¾åœ¨æ–‡ä»¶ä¸­ï¼Œå¾ˆéš¾ä½¿ç”¨ç¼–ç¨‹è¯­è¨€è¿›è¡ŒæŸ¥è¯¢ã€‚

å¦‚æœè¿™ä¸ªæ–‡ä»¶å¾ˆå¤§æ—¶ï¼Œå¾ˆéš¾æ‰¾åˆ°è¿™ä¸ªæ•°æ®ï¼Œå†…å­˜çš„æ¶ˆè€—ä¹Ÿæ˜¯å¾ˆå¤§çš„ã€‚

æ•°æ®åº“ä¸­çš„æ•°æ®æ˜¯å…³è”çš„ï¼Œå¦‚æœè¿™ä¸ªæ•°æ®å­˜æ”¾åœ¨æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“çš„æ£€ç´¢å‡ºæ¥ã€‚

ï¼ˆ2ï¼‰æœ‰åˆ©äºç»´æŠ¤

æ•°æ®åº“çš„å„ç§å®Œæ•´æ€§çº¦æŸä¼šåˆ¶å®šä¸€äº›è§„åˆ™ï¼Œä¿è¯æ•°æ®çš„æœ‰æ•ˆã€å®Œæ•´ã€æ­£ç¡®ã€ä¸€è‡´ã€‚

ï¼ˆ3ï¼‰æœ‰åˆ©äºä¿®æ”¹

å¦‚æœæ•°æ®å­˜æ”¾åœ¨æ–‡ä»¶ä¸­ï¼Œå¾ˆå¤šäººåƒåŒæ—¶ä¿®æ”¹æ•°æ®ä¼šå˜çš„å¾ˆéš¾ï¼Œè¿™ä¹Ÿæ˜¯æ•°æ®åº“èƒ½åšåˆ°çš„ã€‚

ï¼ˆ4ï¼‰æ•°æ®çš„æŒä¹…æ€§

å­˜æ”¾å†æ–‡ä»¶ä¸­çš„æ•°æ®æœ‰å¯èƒ½ï¼Œè¯¯åˆ ï¼Œæ•°æ®ä¸¢å¤±ç­‰é—®é¢˜ï¼Œä½†æ•°æ®åº“ç³»ç»Ÿå´æœ‰ç›¸å…³æœºåˆ¶ä¿è¯æ•°æ®æŒä¹…æ­£ç¡®å¯ç”¨ã€‚

MySQL ä½¿ç”¨çš„æœ€ä¸ºå¹¿æ³›ï¼Œè¿™é‡Œä¼šä»‹ç»åŸºæœ¬ä½¿ç”¨ï¼ŒæŒæ¡äº†åŸºæœ¬ä½¿ç”¨å¯ä»¥å¤„ç†æ—¥å¸¸å¼€å‘çš„ 80% çš„ä¸šåŠ¡ã€‚

## 2. å®‰è£… MySQL

[ç‚¹å‡»æŸ¥çœ‹](https://dev.mysql.com/downloads/mysql/)

ï¼ˆ1ï¼‰ä¸‹è½½

å»ºè®®**ä¸è¦**ä¸‹è½½ `.exe` ç»“å°¾çš„ç¨‹åºï¼Œå»ºè®®ä¸‹è½½å‹ç¼©åŒ…ã€‚

![ä¸‹è½½](sql-install.png)

æ³¨æ„ï¼šéœ€è¦æ³¨å†Œä¸€ä¸ª oricle è´¦å·ï¼Œæˆ–è€…ä½¿ç”¨è¿™ä¸ªè´¦å·ç™»å½•ä¸‹è½½ã€‚

```text
è´¦å·ï¼š1653794708@qq.com
å¯†ç ï¼šEli989898,
```

ä¸‹è½½å®Œæˆåï¼Œè§£å‹åˆ°å­˜æ”¾åº”ç”¨ç¨‹åºçš„ç›®å½•ä¸‹ï¼Œæˆ‘ä¸‹è½½çš„ç›®å½•æ˜¯ `D:\soft\mysql\`ã€‚

ï¼ˆ2ï¼‰ç¯å¢ƒå˜é‡é…ç½®

æ‰“å¼€ â€œæ§åˆ¶é¢æ¿â€ æ·»åŠ ç¯å¢ƒå˜é‡ã€‚

![ç¯å¢ƒå˜é‡é…ç½®](sql-path.png)

ï¼ˆ3ï¼‰æ–°å»ºé…ç½®æ–‡ä»¶

åœ¨ MySQL å®‰è£…ç›®å½•ä¸‹ï¼ˆæˆ‘çš„ç›®å½•å°±æ˜¯ D:\soft\mysql\ï¼‰æ–°å»º `my.ini` çš„æ–‡ä»¶ï¼Œå¹¶ä¸”æ·»åŠ ä»¥ä¸‹é…ç½®

```ini
[mysqld]

# D:\soft\mysql\ æ¢æˆè‡ªå·±çš„å®‰è£…msqlçš„ç›®å½•
basedir=D:\soft\mysql\

# è‡ªå®šä¹‰è®¾ç½®mysqlæ•°æ®åº“çš„æ•°æ®å­˜æ”¾ç›®å½•
# æ³¨æ„è¦å†™è‡ªå·±çš„ç›®å½•, ä¾‹ï¼š D:\\soft\\mysql\\data\
datadir=â€œæ•°æ®åº“ç›®å½• + dataâ€

port=3306
skip-grant-tables
```

::: worrning æ³¨æ„
ä¸Šé¢çš„ `datadir` è¦å†™è‡ªå·±ç”µè„‘å­˜æ”¾ mysql çš„ç›®å½•ã€‚
:::

ï¼ˆ4ï¼‰å®‰è£…æœåŠ¡

**ç®¡ç†å‘˜æ¨¡å¼**ä¸‹å¯åŠ¨ CMDï¼ˆä»£å¼€ mysql ç›®å½•ï¼Œä¸è¦ä½¿ç”¨ powereshellï¼‰ï¼Œåˆ‡æ¢åˆ° `mysql` ç›®å½•ä¸‹çš„ `bin` ç›®å½•ï¼Œè¾“å…¥ `mysqld -install` å‘½ä»¤ï¼Œå°† mysql åŠ å…¥åˆ° Windows çš„æœåŠ¡ä¸­ ã€‚

![install](sql-in.png)

è¾“å…¥ä»¥ä¸‹å‘½ä»¤å®‰è£…

![æŸ¥çœ‹](mysql-cmd-ins.png)

ï¼ˆ5ï¼‰åˆå§‹åŒ–æ•°æ®ç›®å½•

ç°åœ¨éœ€è¦åˆå§‹åŒ–ä¸€ä¸ªå­˜æ”¾**æ•°æ®**çš„ç›®å½•ã€‚

```text
mysqld --initialize --console --user=mysql
```

æ­¤å‘½ä»¤ä¼šéšæœºç”Ÿæˆä¸€ä¸ªå¯†ç ï¼Œéœ€è¦è®°ä½å¯†ç ï¼Œåé¢ä¼šç”¨åˆ°ã€‚

ï¼ˆ6ï¼‰å¯åŠ¨

æˆåŠŸåå¯åŠ¨æ•°æ®åº“

```text
net start mysql
```

![å¯åŠ¨](sql-start.png)

è¿™æ—¶å€™å·²ç»å¯åŠ¨äº†æœåŠ¡ï¼Œæˆ‘ä»¬ä½¿ç”¨ `mysql -u root -p` å‘½ä»¤è¿›å…¥æ•°æ®åº“ï¼Œè¾“å…¥å¯†ç æ—¶ï¼Œç‚¹å‡»ä¹‹å‰ç”Ÿæˆçš„å¯†ç ã€‚

![å¯åŠ¨](sql-root-start.png)

ï¼ˆ7ï¼‰ä¿®æ”¹å¯†ç 

è¿›å…¥æ•°æ®åº“ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹å¯†ç ï¼Œå¹¶ä¸”åˆ·æ–°æƒé™ã€‚

```sql
-- ä¿®æ”¹å¯†ç 
alter user 'root'@'localhost' identified by '123456';

-- åˆ·æ–°æƒé™
flush privileges;
```

![è®¾ç½®å¯†ç ](sql-set-pwd.png)

è¿æ¥å¯è§†åŒ–å·¥å…·å¯èƒ½ä¼šå¤±è´¥ï¼Œå…ˆè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¹‹ååœ¨è¿æ¥ã€‚

```bash
# rootç”¨æˆ·è¿æ¥æ•°æ®åº“
mysql -u root -p123456
```

```sql
-- ä¿®æ”¹åŠ å¯†è§„åˆ™
ALTER USER'root'@'localhost' IDENTIFIED BY 'root' PASSWORD EXPIRE NEVER; 
-- æ›´æ–°ä¸€ä¸‹ç”¨æˆ·çš„å¯†ç 
ALTER USER'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '123456'; 
-- åˆ·æ–°æƒé™
flush privileges;
```

ï¼ˆ8ï¼‰åœæ­¢æœåŠ¡

ä½¿ç”¨ `exit` å‘½ä»¤å¯ä»¥é€€å‡º mysql ç•Œé¢ã€‚

```bash
mysql> exit;
Bye
C:\soft\mysql-8\bin>
```

ä½¿ç”¨ `net stop mysql` åœæ­¢åå°è¿è¡Œçš„ mysqlã€‚

```bash
C:\soft\mysql-8\bin>net stop mysql
MySQL æœåŠ¡æ­£åœ¨åœæ­¢.
MySQL æœåŠ¡å·²æˆåŠŸåœæ­¢ã€‚

C:\soft\mysql-8\bin>
```

è¿è¡Œåˆ°è¿™é‡Œè¯´æ˜ï¼Œmysql å·²ç»å®‰è£…æˆåŠŸã€‚

ä¹‹åå¯åŠ¨æ—¶ï¼Œå…ˆè¿è¡ŒæœåŠ¡ï¼Œä¹‹åç™»å½•å³å¯ã€‚

```mysql
net start mysql
mysql -u root -p123456
```

å…¶ä»–å‘½ä»¤ï¼š

```bash
# æ¸…ç©ºæœåŠ¡
sc delete mysql 
```

## 3. å¯è§†åŒ–å·¥å…·

æ“ä½œæ•°æ®åº“æ˜¯ä¸€èˆ¬ä½¿ç”¨å‘½ä»¤æ“ä½œçš„ã€‚è¿™é‡Œæ¨èä½¿ç”¨ä¸€ä¸ªå¯è§†åŒ–æ“ä½œå·¥å…·ï¼Œä¸ºäº†æ›´ç›´è§‚çš„æŸ¥çœ‹æ•°æ®åº“ä¸­çš„æ•°æ®å’Œæ•°æ®çš„å¯¹åº”å…³ç³»ã€‚

æˆ‘è¿™é‡Œæ¨è sqlyongï¼Œç‚¹å‡»ä¸‹è½½ğŸ‘‰ [sqlyog](https://pan.baidu.com/s/1IlkLChap1gYzCHo3meegew)ã€‚
æå–ç ï¼ša1kw

å®‰è£…å®Œæˆåï¼Œæ³¨å†Œç ï¼š

```tsxt
å§“åï¼ˆNameï¼‰ï¼šcr173
åºåˆ—å·ï¼ˆCodeï¼‰ï¼š8d8120df-a5c3-4989-8f47-5afc79c56e7c
```

ä½¿ç”¨ sqlyong è¿æ¥æ•°æ®åº“

![å®‰è£…](sql-yong.png)

å¦‚æœè¿æ¥å¤±è´¥ï¼Œå…ˆè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¹‹ååœ¨è¿æ¥ã€‚

```bash
# rootç”¨æˆ·è¿æ¥æ•°æ®åº“
mysql -u root -p123456
```

```sql
-- ä¿®æ”¹åŠ å¯†è§„åˆ™
ALTER USER'root'@'localhost' IDENTIFIED BY 'root' PASSWORD EXPIRE NEVER; 
-- æ›´æ–°ä¸€ä¸‹ç”¨æˆ·çš„å¯†ç 
ALTER USER'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '123456'; 
-- åˆ·æ–°æƒé™
flush privileges;
```

## 4. MySQL åŸºæœ¬å‘½ä»¤

MySQL å±äºå…³ç³»å‹æ•°æ®åº“ï¼Œä¸åƒ mongoDBï¼ŒMySQLæœ‰è‡ªå·±çš„æŸ¥è¯¢è¯­è¨€ï¼Œé¦–å…ˆç®€å•ä»‹ç»ä¸€ä¸‹SQLè¯­å¥ã€‚

SQL è¯­å¥ä¸­ï¼Œ`--` è¡¨ç¤ºæ³¨é‡Šï¼Œsql è¯­è¨€ä¸åŒºåˆ†å¤§å°å†™ã€‚

ï¼ˆ1ï¼‰åŸºæœ¬å‘½ä»¤

```mysql
-- è¿æ¥æ•°æ®åº“
mysql -u root -p123456

-- ä¿®æ”¹å¯†ç 
alter user 'root'@'localhost' identified by '123456';

-- åˆ·æ–°æƒé™
flush privileges;

-- é€€å‡ºè¿æ¥
exit
```

ï¼ˆ2ï¼‰æ˜¾ç¤ºè¡¨

æ˜¾ç¤ºè¡¨ä¸­æ‰€æœ‰å…ƒç´ 

```mysql
-- æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“
show databases;

-- æ“ä½œçš„å®ä¾‹/ä½¿ç”¨æ•°æ®åº“
use shool;

-- æ˜¾ç¤ºè¡¨
show tables;

-- æ˜¾ç¤ºè¡¨é‡æ‰€æœ‰ä¿¡æ¯
describe student;
```

ï¼ˆ3ï¼‰åˆ›å»ºè¡¨

```mysql
-- åˆ›å»ºæ•°æ®åº“[åˆ›å»ºå¤±è´¥ä¸ä¼šé€€å‡º]
create database [if not exists] blog;

-- åˆ é™¤æ•°æ®åº“[åˆ›å»ºå¤±è´¥ä¸ä¼šé€€å‡º ]
drop database [if exists] blog;

```

ï¼ˆ2ï¼‰å¢åŠ æ•°æ®

```mysql
-- å¢åŠ ä¸¤æ¡æ•°æ®
insert into users(username,`password`,realname) values ('Tom','123','æ±¤å§†');
insert into users(username,`password`,realname) values ('Jerry','456','æ°ç‘');
```

ï¼ˆ3ï¼‰æŸ¥è¯¢

```mysql
-- æŸ¥è¯¢å…¨éƒ¨
select * from users where state='1';

-- å±€éƒ¨æŸ¥è¯¢
select id,username from users;
select * from users where username='Tom' and password='123' or password='124';

-- æŸ¥è¯¢å«æœ‰ J å­—æ¯
select * from users where username like '%J%'; 

-- æ’åºåé¢åŠ ä¸Š order by id desc
```

ï¼ˆ4ï¼‰æ›´æ–°

```mysql
-- æ›´æ–°
-- SET SQL_SAFE_UPDATES=0;
-- update users set state='0' where username="Jerry";
```

ï¼ˆ5ï¼‰åˆ é™¤

```mysql
-- åˆ é™¤
delete from users where username='Jerry'
```

## 6. æ•°æ®ç±»å‹

ï¼ˆ1ï¼‰æ•°å€¼

- tinyinitï¼š1ä¸ªå­—èŠ‚
- mallintï¼š2ä¸ªå­—èŠ‚
- intï¼š4ä¸ªå­—èŠ‚ï¼ˆå¸¸ç”¨ï¼‰
- bigï¼š8ä¸ªå­—èŠ‚
- floatï¼š4ä¸ªå­—èŠ‚
- doubleï¼š8ä¸ªå­—èŠ‚
- decimalï¼šå­—ç¬¦ä¸²å½¢å¼çš„æµ®ç‚¹æ•°ï¼Œé‡‘èè®¡ç®—ä½¿ç”¨ã€‚

ï¼ˆ2ï¼‰å­—ç¬¦ä¸²

- charï¼šå­—ç¬¦ä¸² 0 - 255
- varcharï¼šå¯å˜å­—ç¬¦ä¸²ï¼ˆå¸¸ç”¨ï¼‰ï¼Œ0-65536
- tinytextï¼šå¾®å‹æ–‡æœ¬ 2^8 -1)
- textï¼šæ–‡æœ¬ 2^16 ï¼ˆå¸¸ç”¨ï¼‰

ï¼ˆ3ï¼‰æ—¶é—´æ—¥æœŸ

- dateï¼šYYYY-MM-DD
- timeï¼šHH:mm:ss
- datetimeï¼šYYYY-MM-DD HH:mm:ss ï¼ˆå¸¸ç”¨ï¼‰

- timestampï¼šæ—¶é—´æˆ³
- yearï¼šå¹´ä»½

ï¼ˆ4ï¼‰null

## 7. æ•°æ®åº“å­—æ®µå±æ€§

- Unsignedï¼šæ— ç¬¦å·æ•´æ•°
- zerofillï¼šé›¶å¡«å……ï¼Œä¸è¶³çš„ä½æ•°ç”¨é›¶å¡«å……
- auto_incrementï¼šè‡ªå¢ï¼Œè‡ªåŠ¨åœ¨ä¸Šä¸€æ¡è®°å½•çš„åŸºç¡€ä¸Šå¢åŠ ä¸€ï¼Œå¿…é¡»ä¸ºæ•´æ•°
- not nullï¼šä¸ç»™è¿™ä¸ªå±æ€§èµ‹å€¼ä¼šæŠ¥é”™
- defaultï¼šè®¾ç½®é»˜è®¤å€¼ï¼Œé»˜è®¤ä¸º null

æ¯ä¸ªè¡¨ä¸­æœ‰å›ºå®šçš„å­—æ®µï¼Œè¿™æ˜¯è§„èŒƒï¼Œä¸æ˜¯å¿…é¡»çš„ã€‚

- idï¼šä¸»é”®
- versionï¼šä¹è§‚é”
- is_deleteï¼šä¼ªåˆ é™¤
- gmt_createï¼šåˆ›å»ºæ—¶é—´
- gmt_updateï¼šä¿®æ”¹æ—¶é—´

## 8. Node.js ä¸­ä½¿ç”¨ MySQL

åˆå§‹åŒ–é¡¹ç›®ï¼Œå’Œå®‰è£…

```bash
npm init -y
npm i mysql
```

ä¸€ä¸ªå®Œæ•´çš„æ¡ˆä¾‹ï¼š

```js
 // index.js æ–‡ä»¶
const mysql = require('mysql')

// åˆ›å»ºå¯¹è±¡ & é…ç½®
const con = mysql.createConnection({
    host:'localhost',   // è¿æ¥çš„ä¸»æœº
    user: 'root',       // ç”¨æˆ·å
    password: 'sql123', // å¯†ç 
    posrt:'3306',       // ç«¯å£
    database: 'myblog'  // å®ä¾‹
})

// è¿æ¥æ•°æ®åº“
con.connect()

// æŸ¥è¯¢
var sql = 'select * from users'
con.query(sql,(err,data)=>{
    if(err){
        console.log(err)
        return
    }
    console.log(data)
})

// å…³é—­è¿æ¥
con.end()
```

## å½»åº•å…³é—­

win10 æŒ‰ä½ win + R è¾“å…¥ services.mscï¼ŒæŸ¥æ‰¾ mysql æ˜¯å¦åœ¨å¯åŠ¨ï¼Œå¦‚æœä»¥å¯åŠ¨ï¼Œå³å‡»åœæ­¢ã€‚

## å‚è€ƒé“¾æ¥

- [ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®åº“](https://www.zhihu.com/question/24088008)

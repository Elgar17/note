# TCP 协议

TCP协议是面向连接的可靠传输协议。TCP 层为应用层提供可靠的连接，这个连接是通过三次握手和四次挥手完成的。

## 1、三次握手

通过三次握手可以建立一个可靠的连接。这个连接是通过套接字来完成的。 

```
c ---SYN------> s
c <--SYN ASK--- s
c ---ASK------> s
```

如果在连接之后，一边的服务挂了，另一边不知道对方挂了，所以就不会断开这个连接，可以通过开启 TCP 的 keeplive 来解决这个问题。

套接字是有目标IP,PORT 和本地 IP,PORT 四元组组成。通过四元组，双方相互确认发送信息的目标。四个缺一不可，所以具有唯一性的特点。

服务端监听的服务也是套接字，这个服务可以匹配任意 IP 和 PORT 的请求。Linux 下  通过下面的命令查看网络连接。

```bash
# 查看网络链接
netstat -natp
```

nc 是一个通过 TCP/UDP 进行启动  连接和监听的命令。

```bash
# 启动一个监听服务
nc -l 192.168.1.104 80 

# 连接到目标服务
nc 192.168.1.104 80
```